<% contracts.forEach(function(contract) {%>
  <!-- Modal -->
  <div class="modal fade" id="<%= contract.addr%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel"><%= contract.addr%></h4>
        </div>
        <div class="modal-body">
          <p><strong>Contract address</strong>: <a href="http://<%= config.eth_testnet ? 'testnet.' : ''%>etherscan.io/address/<%= contract.addr%>" target="_blank"><%= contract.addr%></a></a></p>
          <p><strong>Probability of winning</strong>: <%= contract.pwin/100 %>%</p>
          <p><strong>Payout</strong>: <%= (10000-contract.edge)/contract.pwin %>x (includes <%= contract.edge/100%>% house edge)</p>
          <p><strong>Bankroll</strong>: <%= bundle.utility.weiToEth(contract.bankroll) %> eth</p>
          <p><strong>Min bet</strong>: <%= bundle.utility.weiToEth(contract.minBet) %> eth</p>
          <p><strong>Max bet</strong>: <%= bundle.utility.weiToEth(contract.maxWin * contract.bankroll / 10000 / ( 10000/contract.pwin - 1 )) %> eth (corresponds to <%= contract.maxWin/100 %>% of bankroll max win amount)</p>
          <p><strong>Amount wagered</strong>: <%= bundle.utility.weiToEth(contract.amountWagered) %> eth</p>
          <p><strong>House profit</strong>: <%= bundle.utility.weiToEth(contract.profit) %> eth</p>
          <p><strong>Send a bet with Geth:</strong></p>
          <pre>eth.sendTransaction({from: eth.accounts[0], to: '<%= contract.addr%>', value: web3.toWei(1, "ether"), gas: 110000})</pre>
        </div>
      </div>
    </div>
  </div>
<% }); %>
<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>Address</th>
      <th>Win probability</th>
      <th>Payout</th>
      <th>Bankroll</th>
      <th>Min bet</th>
      <th>Max bet</th>
      <th>Volume</th>
      <th>House profit</th>
    </tr>
  </thead>
  <tbody>
    <% contracts.forEach(function(contract) {%>
    <tr>
      <td>
        <a href="#" data-toggle="modal" data-target="#<%= contract.addr%>"><%= contract.addr %></a>
      </td>
      <td><%= contract.pwin/100 %>%</td>
      <td><%= (10000-contract.edge)/contract.pwin %>x</td>
      <td><%= bundle.utility.weiToEth(contract.bankroll) %></td>
      <td><%= bundle.utility.weiToEth(contract.minBet) %></td>
      <td><%= bundle.utility.weiToEth(contract.maxWin * contract.bankroll / 10000 / ( 10000/contract.pwin - 1 )) %></td>
      <td><%= bundle.utility.weiToEth(contract.amountWagered) %></td>
      <td><%= bundle.utility.weiToEth(contract.profit) %></td>
    </tr>
    <% }); %>
  </tbody>
</table>
